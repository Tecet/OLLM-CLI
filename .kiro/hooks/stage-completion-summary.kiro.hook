{
  "enabled": true,
  "name": "Stage Completion Summary",
  "description": "Generates a comprehensive summary after stage completion including work description, time/credit breakdown per task, code statistics (lines, files, folders), and AI vs traditional development benchmarks. Saves to .dev/logs/dev-log.md with metadata.",
  "version": "1",
  "when": {
    "type": "userTriggered"
  },
  "then": {
    "type": "askAgent",
    "prompt": "Create a comprehensive stage completion summary and save it to .dev/logs/dev-log.md. Follow these steps:\n\n1. **Extract Real Data from tasks.md**:\n   - Read the current stage's tasks.md file (e.g., .kiro/specs/stage-03-tools-policy/tasks.md)\n   - Parse all completed tasks to extract:\n     - _Started: timestamp (e.g., 2026-01-11 01:42)\n     - _Completed: timestamp (e.g., 2026-01-11 03:50)\n     - _Duration: time (e.g., 2h 8m)\n     - _Credits: value (e.g., 4.45)\n   - Find the earliest _Started timestamp across all tasks\n   - Find the latest _Completed timestamp across all tasks\n   - Calculate total duration from earliest start to latest completion\n   - Sum all _Credits values from all tasks\n\n2. **Create Stage Summary Section**:\n   - Brief description of work completed in this stage\n   - Display stage timeline:\n     - Started: [earliest _Started timestamp]\n     - Completed: [latest _Completed timestamp]\n     - Duration: [calculated total duration in format like \"2h 8m\"]\n     - Credits: [sum of all _Credits]\n   - Create a breakdown table showing each major task with:\n     - Task name\n     - Time spent (from _Duration field)\n     - Kiro credits used (from _Credits field)\n\n3. **Code Statistics**:\n   - Count lines of code created (use grep or file analysis)\n   - Number of files created\n   - Number of folders created\n\n4. **Development Benchmark**:\n   - Estimated time for a small dev team of 3 developers to complete this stage without AI assistance\n   - Actual time taken with Kiro AI (use the calculated total duration)\n   - Time savings percentage and efficiency comparison\n   - Cost analysis: Total Kiro credits used vs estimated developer cost\n\n5. **Metadata**:\n   - Date of work (from timestamps)\n   - Stage identifier\n   - Any relevant notes\n\nFormat this as a new section in the existing .dev/logs/dev-log.md file (create the file if it doesn't exist). Use proper markdown formatting with headers, lists, and tables where appropriate. Keep clear separation between each stage entry.\n\n"
  },
  "workspaceFolderName": "OLLM CLI",
  "shortName": "stage-completion-summary"
}